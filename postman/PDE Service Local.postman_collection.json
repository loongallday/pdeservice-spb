{
	"info": {
		"_postman_id": "pde-service-local-001",
		"name": "PDE Service - Local Development",
		"description": "Complete API collection for testing PDE Service Edge Functions locally",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{accessToken}}",
				"type": "string"
			}
		]
	},
	"item": [
		{
			"name": "üîß Setup - Create Admin User",
			"item": [
				{
					"name": "Step 1: Create Super Admin Role (via REST API)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201 || pm.response.code === 200) {",
									"    const jsonData = pm.response.json();",
									"    let roleId;",
									"    if (Array.isArray(jsonData) && jsonData.length > 0) {",
									"        roleId = jsonData[0].id;",
									"    } else if (jsonData.id) {",
									"        roleId = jsonData.id;",
									"    }",
									"    if (roleId) {",
									"        pm.environment.set('superAdminRoleId', roleId);",
									"        console.log('‚úÖ Super admin role created!');",
									"        console.log('Role ID:', roleId);",
									"    }",
									"} else if (pm.response.code === 409) {",
									"    // Role already exists, fetch it",
									"    console.log('Role already exists, fetching...');",
									"    pm.sendRequest({",
									"        url: pm.environment.get('baseUrl') + '/rest/v1/roles?code=eq.SUPER_ADMIN',",
									"        method: 'GET',",
									"        header: {",
									"            'apikey': pm.environment.get('serviceRoleKey'),",
									"            'Authorization': 'Bearer ' + pm.environment.get('serviceRoleKey')",
									"        }",
									"    }, function (err, res) {",
									"        if (res && res.json && res.json.length > 0) {",
									"            pm.environment.set('superAdminRoleId', res.json[0].id);",
									"            console.log('‚úÖ Found existing role ID:', res.json[0].id);",
									"        }",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "apikey",
								"value": "{{serviceRoleKey}}",
								"type": "text",
								"description": "Use service role key to bypass RLS"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{serviceRoleKey}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Prefer",
								"value": "return=representation",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\": \"SUPER_ADMIN\",\n  \"name_th\": \"‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î\",\n  \"name_en\": \"Super Administrator\",\n  \"description\": \"Super administrator with full system access (level 10)\",\n  \"level\": 10,\n  \"is_active\": true,\n  \"requires_auth\": true\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/rest/v1/roles",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"rest",
								"v1",
								"roles"
							]
						},
						"description": "Creates super admin role. Uses Supabase REST API with service role key to bypass RLS.\n\n**Requires**: {{serviceRoleKey}} - Get from `supabase status`\n\n**Auto-sets**: {{superAdminRoleId}} from response\n\n**Note**: If role already exists (409), automatically fetches existing role ID."
					},
					"response": []
				},
				{
					"name": "Step 2: Create Admin Employee",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201 || pm.response.code === 200) {",
									"    const jsonData = pm.response.json();",
									"    if (Array.isArray(jsonData) && jsonData.length > 0) {",
									"        pm.environment.set('adminEmployeeId', jsonData[0].id);",
									"        pm.environment.set('adminRoleId', jsonData[0].role_id);",
									"        console.log('‚úÖ Admin employee created!');",
									"        console.log('Employee ID:', jsonData[0].id);",
									"        console.log('Role ID:', jsonData[0].role_id);",
									"    } else if (jsonData.id) {",
									"        pm.environment.set('adminEmployeeId', jsonData.id);",
									"        pm.environment.set('adminRoleId', jsonData.role_id);",
									"        console.log('‚úÖ Admin employee created!');",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\": \"ADMIN001\",\n  \"name\": \"System Administrator\",\n  \"nickname\": \"Admin\",\n  \"email\": \"{{adminEmail}}\",\n  \"role_id\": \"{{superAdminRoleId}}\",\n  \"is_active\": true\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-employees",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-employees"
							]
						},
						"description": "Creates admin employee. Requires level 2+ auth.\n\n**Prerequisites**:\n- Super admin role must exist (run Step 1 or seed.sql)\n- Set {{superAdminRoleId}} variable from Step 1 response\n- Set {{adminEmail}} in environment"
					},
					"response": []
				},
				{
					"name": "Step 3: Create Auth User (Supabase Auth)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const jsonData = pm.response.json();",
									"    pm.environment.set('adminAuthUserId', jsonData.user.id);",
									"    console.log('‚úÖ Auth user created!');",
									"    console.log('Auth User ID:', jsonData.user.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "apikey",
								"value": "{{serviceRoleKey}}",
								"type": "text",
								"description": "Use service role key for admin operations"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"{{adminEmail}}\",\n  \"password\": \"{{adminPassword}}\",\n  \"email_confirm\": true,\n  \"user_metadata\": {\n    \"role\": \"super_admin\"\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/auth/v1/admin/users",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"auth",
								"v1",
								"admin",
								"users"
							]
						},
						"description": "Creates auth user via Supabase Admin API.\n\n**Requires**: Service role key ({{serviceRoleKey}})\n\n**Sets**: {{adminAuthUserId}} from response"
					},
					"response": []
				},
				{
					"name": "Step 4: Link Auth to Employee",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"{{adminEmail}}\",\n  \"password\": \"{{adminPassword}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-employees/{{adminEmployeeId}}/link-auth",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-employees",
								"{{adminEmployeeId}}",
								"link-auth"
							]
						},
						"description": "Links the auth user to the employee record.\n\n**Prerequisites**:\n- Admin employee created (Step 2)\n- Auth user created (Step 3)\n- {{adminEmployeeId}} and {{adminAuthUserId}} set\n\n**Note**: This endpoint creates the auth user if it doesn't exist, or links existing one."
					},
					"response": []
				},
				{
					"name": "Alternative: Link Existing Auth User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"auth_uid\": \"{{adminAuthUserId}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-employees/{{adminEmployeeId}}/link-existing-auth",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-employees",
								"{{adminEmployeeId}}",
								"link-existing-auth"
							]
						},
						"description": "Links an existing auth user to employee.\n\nUse this if you already created the auth user manually or via Supabase Dashboard."
					},
					"response": []
				},
				{
					"name": "Verify Admin User",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-employees/code/ADMIN001",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-employees",
								"code",
								"ADMIN001"
							]
						},
						"description": "Verifies the admin user was created and linked correctly.\n\nShould return employee with:\n- code: ADMIN001\n- auth_user_id: set (not null)\n- role_id: pointing to SUPER_ADMIN role\n- role level: 10"
					},
					"response": []
				}
			],
			"description": "Complete setup flow to create a super admin user.\n\n**Recommended Approach**:\n1. Run `supabase/seed.sql` first (creates role + employee)\n2. Use Step 3 to create auth user\n3. Use Step 4 to link auth to employee\n\n**Alternative (API-only)**:\n1. Step 1: Create role (requires service role key)\n2. Step 2: Create employee (requires level 2+ auth)\n3. Step 3: Create auth user\n4. Step 4: Link auth to employee"
		},
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Sign In",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const jsonData = pm.response.json();",
									"    pm.environment.set('accessToken', jsonData.access_token);",
									"    console.log('‚úÖ Access token saved to environment!');",
									"    console.log('Token:', jsonData.access_token);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"{{adminEmail}}\",\n  \"password\": \"{{adminPassword}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/auth/v1/token?grant_type=password",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"auth",
								"v1",
								"token"
							],
							"query": [
								{
									"key": "grant_type",
									"value": "password"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get User",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/auth/v1/user",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"auth",
								"v1",
								"user"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Initialize",
			"item": [
				{
					"name": "Initialize App",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-initialize",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-initialize"
							]
						},
						"description": "Returns all initial data needed to bootstrap the application:\n\n**Returns:**\n- `employee`: Current user's full employee data with role and department\n- `roles`: All roles in the system\n- `departments`: All departments in the system\n- `features`: Enabled features filtered by employee level and role\n\n**Use Case:**\nCall this endpoint once when the app starts to get all essential data in a single request.\n\n**Requires:** Authentication (Bearer token)"
					},
					"response": []
				}
			]
		},
		{
			"name": "Employees",
			"item": [
				{
					"name": "List Employees",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-employees",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-employees"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Employee by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-employees/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-employees",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "{{adminEmployeeId}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Employee by Code",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-employees/code/:code",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-employees",
								"code",
								":code"
							],
							"variable": [
								{
									"key": "code",
									"value": "ADMIN001"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Employee",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\": \"EMP001\",\n  \"name\": \"John Doe\",\n  \"nickname\": \"John\",\n  \"email\": \"john@example.com\",\n  \"role_id\": \"uuid-here\",\n  \"is_active\": true\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-employees",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-employees"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Tickets",
			"item": [
				{
					"name": "List Tickets",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-tickets",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-tickets"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Ticket by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-tickets/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-tickets",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "uuid-here"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Ticket",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"company_id\": \"uuid-here\",\n  \"site_id\": \"uuid-here\",\n  \"work_type_id\": \"uuid-here\",\n  \"description\": \"Test ticket description\",\n  \"priority\": \"normal\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-tickets",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-tickets"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Ticket",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"description\": \"Updated description\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-tickets/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-tickets",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "uuid-here"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Ticket",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-tickets/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-tickets",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "uuid-here"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Companies",
			"item": [
				{
					"name": "List Companies",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-companies",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-companies"
							]
						}
					},
					"response": []
				},
				{
					"name": "Search Companies",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-companies/search?q=test",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-companies",
								"search"
							],
							"query": [
								{
									"key": "q",
									"value": "test"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Company by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-companies/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-companies",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "tax-id-here"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Company",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"tax_id\": \"1234567890123\",\n  \"name_th\": \"‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ó‡∏î‡∏™‡∏≠‡∏ö ‡∏à‡∏≥‡∏Å‡∏±‡∏î\",\n  \"name_en\": \"Test Company Ltd.\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-companies",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-companies"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Sites",
			"item": [
				{
					"name": "List Sites",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-sites",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-sites"
							]
						}
					},
					"response": []
				},
				{
					"name": "Search Sites",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-sites/search?q=test",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-sites",
								"search"
							],
							"query": [
								{
									"key": "q",
									"value": "test"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Site by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-sites/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-sites",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "uuid-here"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Site",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Test Site\",\n  \"company_id\": \"uuid-here\",\n  \"address_detail\": \"123 Test Street\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-sites",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-sites"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Contacts",
			"item": [
				{
					"name": "List Contacts",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-contacts",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-contacts"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Contacts by Site",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-contacts/site/:siteId",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-contacts",
								"site",
								":siteId"
							],
							"variable": [
								{
									"key": "siteId",
									"value": "uuid-here"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Contact",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"site_id\": \"uuid-here\",\n  \"person_name\": \"John Doe\",\n  \"phone\": \"0812345678\",\n  \"email\": \"john@example.com\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-contacts",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-contacts"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Departments",
			"item": [
				{
					"name": "List Departments",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-departments",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-departments"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Department by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-departments/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-departments",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "uuid-here"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Department",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\": \"SALES\",\n  \"name_th\": \"‡∏ù‡πà‡∏≤‡∏¢‡∏Ç‡∏≤‡∏¢\",\n  \"name_en\": \"Sales Department\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-departments",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-departments"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Roles",
			"item": [
				{
					"name": "List Roles",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-roles",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-roles"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Role by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-roles/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-roles",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "uuid-here"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Role",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\": \"MANAGER\",\n  \"name_th\": \"‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£\",\n  \"name_en\": \"Manager\",\n  \"level\": 5\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-roles",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-roles"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Features",
			"item": [
				{
					"name": "Get Enabled Features",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-features",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-features"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Menu Items",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-features/menu",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-features",
								"menu"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Reference Data",
			"item": [
				{
					"name": "Get Work Types",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-reference-data/work-types",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-reference-data",
								"work-types"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Ticket Statuses",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-reference-data/statuses",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-reference-data",
								"statuses"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Leave Types",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-reference-data/leave-types",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-reference-data",
								"leave-types"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Provinces",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-reference-data/provinces",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-reference-data",
								"provinces"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Appointments",
			"item": [
				{
					"name": "List Appointments",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-appointments",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-appointments"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Appointment by Ticket",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-appointments/ticket/:ticketId",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-appointments",
								"ticket",
								":ticketId"
							],
							"variable": [
								{
									"key": "ticketId",
									"value": "uuid-here"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Appointment",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"ticket_id\": \"uuid-here\",\n  \"appointment_date\": \"2025-01-01\",\n  \"appointment_time\": \"14:00:00\",\n  \"notes\": \"Test appointment\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-appointments",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-appointments"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Work Results",
			"item": [
				{
					"name": "List Work Results",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-work-results",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-work-results"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Work Result by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-work-results/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-work-results",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "uuid-here"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Work Result",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"ticket_id\": \"uuid-here\",\n  \"description\": \"Work completed successfully\",\n  \"result_note\": \"All tasks finished\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-work-results",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-work-results"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Leave Requests",
			"item": [
				{
					"name": "List Leave Requests",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-leave-requests",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-leave-requests"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Leave Request",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"leave_type_id\": \"uuid-here\",\n  \"start_date\": \"2025-01-01\",\n  \"end_date\": \"2025-01-02\",\n  \"reason\": \"Personal reasons\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-leave-requests",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-leave-requests"
							]
						}
					},
					"response": []
				},
				{
					"name": "Approve Leave Request",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"notes\": \"Approved\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-leave-requests/:id/approve",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-leave-requests",
								":id",
								"approve"
							],
							"variable": [
								{
									"key": "id",
									"value": "uuid-here"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Polls",
			"item": [
				{
					"name": "List Polls",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-polls",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-polls"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Poll by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-polls/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-polls",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "uuid-here"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Poll",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"question\": \"What's your favorite feature?\",\n  \"options\": [\n    {\"option_text\": \"Feature A\"},\n    {\"option_text\": \"Feature B\"}\n  ],\n  \"expires_at\": \"2025-12-31T23:59:59Z\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-polls",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-polls"
							]
						}
					},
					"response": []
				},
				{
					"name": "Vote on Poll",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "apikey",
								"value": "{{apikey}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"option_id\": \"uuid-here\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/functions/v1/api-polls/:id/vote",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"functions",
								"v1",
								"api-polls",
								":id",
								"vote"
							],
							"variable": [
								{
									"key": "id",
									"value": "uuid-here"
								}
							]
						}
					},
					"response": []
				}
			]
		}
	]
}

